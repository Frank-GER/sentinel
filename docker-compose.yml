version: '3.4'

# This Compose file is expected to be used with the tanenbaum-up.sh script.
# The volumes below mount the configs generated by the script into each
# service.

volumes:
  l1_data:


services:
  l1:
    build:
      context: .
      dockerfile: Dockerfile.l1
    ports:
      - "80:8080"
      - "8545:8545"
    volumes:
      - "l1_data:/db"
    environment:
      PODA_DB_ACCOUNT_ID: "${PODA_DB_ACCOUNT_ID}"
      PODA_DB_KEY_ID: "${PODA_DB_KEY_ID}"
      PODA_DB_ACCESS_KEY: "${PODA_DB_ACCESS_KEY}"
      NETWORK: "${NETWORK}"